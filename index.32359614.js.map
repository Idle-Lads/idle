{"mappings":"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","sources":["utils/store.js","utils/display.js","utils/tick.js","game/events.js","utils/devtools.js","app.js"],"sourcesContent":["const store = {\n\twholeStoreSubs: []\n};\n\nfunction initStoreValue(key, value, subs=[]) {\n\tif (store[key]) {\n\t\tconsole.error('Store already has entry by key', key);\n\t\treturn;\n\t}\n\n\tstore[key] = {\n\t\tvalue: value,\n\t\tsubs: [...subs]\n\t};\n\n\treturn;\n}\n\nfunction getStoreValue(key) {\n\tif (!store[key]) {\n\t\tconsole.error('No entry in store by key', key);\n\t\treturn null;\n\t}\n\n\treturn store[key].value;\n}\n\nfunction executeSubs(key) {\n\tif (!store[key]) {\n\t\tconsole.error('No entry in store by key', key);\n\t\treturn;\n\t}\n\n\tconst subs = store[key].subs;\n\n\tif (subs.length == 0) {\n\t\treturn;\n\t} \n\n\tfor (let sub in subs) {\n\t\tsubs[sub]();\n\t}\n\n\treturn;\n}\n\nfunction updateStoreValue(key, value) {\n\tif (!store[key]) {\n\t\tconsole.error('No entry in store by key', key);\n\t\treturn;\n\t}\n\n\tstore[key].value = value;\n\texecuteSubs(key);\n\texecuteWholeStoreSubs();\n\n\treturn;\n}\n\nfunction updateStoreSubs(key, subs) {\n\tif (!store[key]) {\n\t\tconsole.error('No entry in store by key', key);\n\t\treturn;\n\t}\n\n\tstore[key].subs.push(...subs);\n\n\treturn;\n}\n\nfunction replacer(key, value) {\n\tif (typeof value === 'function') {\n\t\treturn value.toString();\n\t}\n\treturn value;\n}\n\nfunction getStoreString(seperator='') {\n\treturn JSON.stringify(store, replacer, seperator);\n}\n\nfunction updateWholeStoreSubs(subs) {\n\tstore.wholeStoreSubs.push(...subs);\n}\n\nfunction executeWholeStoreSubs() {\n\tconst subs = store.wholeStoreSubs;\n\n\tif (subs.length == 0) {\n\t\treturn;\n\t} \n\n\tfor (let sub in subs) {\n\t\tsubs[sub]();\n\t}\n\n\treturn;\n}\n\nexport {\n\tinitStoreValue,\n\tgetStoreValue,\n\tupdateStoreValue,\n\tupdateStoreSubs,\n\tgetStoreString,\n\tupdateWholeStoreSubs\n};\n","import { getStoreValue } from '/utils/store.js';\n\nfunction draw(className, value) {\n\tdocument.querySelector(className).innerHTML = value;\n\n\treturn;\n}\n\nfunction drawFromStore(className, storeKey) {\n\tlet value = getStoreValue(storeKey);\n\n\tif (value === null) {\n\t\tconsole.error('Failed to retrieve value from store using key', storeKey);\n\t\treturn;\n\t}\n\n\tdraw(className, value);\n\n\treturn;\n}\n\nexport {\n\tdraw,\n\tdrawFromStore\n};\n","import { getStoreValue } from '/utils/store.js';\n\nvar MINIMUM_INTERVAL = 300;\n\nfunction onlineTicks(cb) {\n\tvar interval = getStoreValue('interval'),\n\t\texit = getStoreValue('exit');\n\n\tif (interval < MINIMUM_INTERVAL) {\n\t\tconsole.warn('Attempted to use interval lower than minimum interval, setting interval to minimum');\n\t\tinterval = MINIMUM_INTERVAL;\n\t}\n\n\tif (exit === true) {\n\t\tconsole.log('Ticks stopped');\n\t\treturn;\n\t}\n\n\tsetTimeout(() => {\n\t\tcb();\n\t\tonlineTicks(cb);\n\t}, interval);\n\n\treturn;\n}\n\n// #TODO: Implement offline tick calculator\n// function offlineTicks(interval, cb) {\n// \t\n// }\n\nexport {\n\tonlineTicks\n};\n","import { draw } from '/utils/display.js';\nimport { onlineTicks } from '/utils/tick.js';\nimport { getStoreValue, updateStoreValue } from '/utils/store.js';\n\nfunction startButton() {\n\tdocument.querySelector('.startCounter').addEventListener('click', function () {\n\t\tupdateStoreValue('exit', false);\n\t\tonlineTicks(function() { \n\t\t\tvar money = getStoreValue('money');\n\t\t\tupdateStoreValue('money', money + 1);\n\t\t});\n\n\t\tdocument.querySelector('.startCounter').disabled = true;\n\t\tdocument.querySelector('.stopCounter').disabled = false;\n\t});\n\n\treturn;\n}\n\nfunction stopButton() {\n\tdocument.querySelector('.stopCounter').addEventListener('click', function () {\n\t\tupdateStoreValue('exit', true);\n\t\tdocument.querySelector('.startCounter').disabled = false;\n\t\tdocument.querySelector('.stopCounter').disabled = true;\n\t});\n\n\treturn;\n}\n\nfunction upgradeButton() {\n\tdocument.querySelector('.buyUpgrade').addEventListener('click', function () {\n\t\tvar upgradeCost = getStoreValue('upgradeCost'),\n\t\t\tmoney = getStoreValue('money'),\n\t\t\tinterval = getStoreValue('interval');\n\n\t\tif (upgradeCost > money) {\n\t\t\tdraw('.warningText', 'Not enough money!');\n\t\t\treturn;\n\t\t}\n\n\t\tdraw('.warningText', '');\n\n\t\tupdateStoreValue('money', money - upgradeCost);\n\t\tupdateStoreValue('interval', interval - 50);\n\t\tupdateStoreValue('upgradeCost', upgradeCost * 2);\n\t});\n\n\treturn;\n}\n\nexport {\n\tstartButton,\n\tstopButton,\n\tupgradeButton\n};\n","import { updateWholeStoreSubs, getStoreString } from '/utils/store.js';\nimport { draw } from '/utils/display.js';\n\nfunction isInDev() {\n\tvar params = new URLSearchParams(window.location.search);\n\n\tif (params.get('devmode') !== null) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction activateDevFunctions() {\n\tif (!isInDev()) {\n\t\treturn;\n\t}\n\t\t\t\n\tconst devTools = document.createElement('pre');\n\tdevTools.classList.add('devTools');\n\tdocument.querySelector('.game').append(devTools);\n\n\tupdateWholeStoreSubs([() => draw('.devTools', getStoreString('\\t'))]);\n\n\twindow.getStoreString = getStoreString;\n\n\treturn;\n}\n\nexport {\n\tactivateDevFunctions\n};\n","import { drawFromStore } from '/utils/display.js';\nimport { startButton, stopButton, upgradeButton } from '/game/events.js';\nimport { initStoreValue } from '/utils/store.js';\n\nimport { activateDevFunctions } from '/utils/devtools.js';\n\nfunction bindEvents() {\n\tstartButton();\n\tstopButton();\n\tupgradeButton();\n\n\treturn;\n}\n\nfunction initializeStore() {\n\tinitStoreValue('money', 0, [() => drawFromStore('.money', 'money')]);\n\tinitStoreValue('upgradeCost', 1, [() => drawFromStore('.upgradeCost', 'upgradeCost')]);\n\n\tinitStoreValue('interval', 1000);\n\tinitStoreValue('exit', false);\n\n\treturn;\n}\n\nfunction initializeDraw() {\n\tdrawFromStore('.money', 'money');\n\tdrawFromStore('.upgradeCost', 'upgradeCost');\n\t\n\treturn;\n}\n\nfunction init() {\n\tconsole.log('Application started');\n\t\n\tbindEvents();\n\n\tinitializeStore();\n\tinitializeDraw();\n\n\tdocument.querySelector('.startCounter').disabled = false;\n\tdocument.querySelector('.stopCounter').disabled = true;\n\n\tactivateDevFunctions();\n\n\treturn;\n}\n\ninit();\n"],"names":["$e5a1e8ad98edf3c3$var$store","wholeStoreSubs","$e5a1e8ad98edf3c3$export$49bb15a59253183a","key","value","subs","console","error","$e5a1e8ad98edf3c3$export$2bf86598e5b0b657","$e5a1e8ad98edf3c3$export$c4def42558db6d40","length","sub","$e5a1e8ad98edf3c3$var$executeSubs","$e5a1e8ad98edf3c3$var$executeWholeStoreSubs","$e5a1e8ad98edf3c3$var$replacer","toString","$e5a1e8ad98edf3c3$export$4057d970d3926fd7","seperator","JSON","stringify","$3d1283c690f0bed0$export$e529deb2bfd496dc","className","document","querySelector","innerHTML","$3d1283c690f0bed0$export$acf18b9e9fa3657b","storeKey","$c63a0215d81aa66d$export$547b13d7b8ab4e45","cb","interval","exit","warn","setTimeout","log","$6797e304a7b9719e$export$c19513be8e47ff73","addEventListener","disabled","$09eab49b787ed8b7$export$51faf82b9919d880","URLSearchParams","window","location","search","get","devTools","createElement","classList","add","append","push","getStoreString","$6b17f08f738443dc$var$bindEvents","upgradeCost","money"],"version":3,"file":"index.32359614.js.map"}