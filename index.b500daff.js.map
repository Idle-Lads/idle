{"mappings":"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","sources":["utils/store.js","utils/display.js","utils/tick.js","game/events.js","utils/devtools.js","app.js"],"sourcesContent":["const store = {\n\twholeStoreSubs: [],\n\tloaded: { value: false }\n};\n\nfunction getStoreValues() {\n\tconst storeValues = {};\n\n\tfor (let key in store) {\n\t\tif (store[key].value) {\n\t\t\tstoreValues[key] = store[key].value;\n\t\t}\n\t}\n\n\treturn storeValues;\n}\n\nfunction saveToLocalStorage() {\n\tconst storeValues = JSON.stringify(getStoreValues());\n\n\twindow.localStorage.setItem('idlestore', storeValues);\n}\n\nfunction initStoreValue(key, value, subs=[]) {\n\tif (store[key]) {\n\t\tconsole.error('Store already has entry by key', key);\n\t\treturn;\n\t}\n\n\tconst storeValues = JSON.parse(window.localStorage.getItem('idlestore'));\n\n\tif (storeValues && storeValues[key]) {\n\t\tvalue = storeValues[key];\n\t}\n\n\tstore[key] = {\n\t\tvalue: value,\n\t\tsubs: [...subs]\n\t};\n\n\treturn;\n}\n\nfunction getStoreValue(key) {\n\tif (!store[key]) {\n\t\tconsole.error('No entry in store by key', key);\n\t\treturn null;\n\t}\n\n\treturn store[key].value;\n}\n\nfunction executeSubs(key) {\n\tif (!store[key]) {\n\t\tconsole.error('No entry in store by key', key);\n\t\treturn;\n\t}\n\n\tconst subs = store[key].subs;\n\n\tif (subs.length == 0) {\n\t\treturn;\n\t} \n\n\tfor (let sub in subs) {\n\t\tsubs[sub]();\n\t}\n\n\treturn;\n}\n\nfunction updateStoreValue(key, value) {\n\tif (!store[key]) {\n\t\tconsole.error('No entry in store by key', key);\n\t\treturn;\n\t}\n\n\tstore[key].value = value;\n\texecuteSubs(key);\n\texecuteWholeStoreSubs();\n\n\treturn;\n}\n\nfunction updateStoreSubs(key, subs) {\n\tif (!store[key]) {\n\t\tconsole.error('No entry in store by key', key);\n\t\treturn;\n\t}\n\n\tstore[key].subs.push(...subs);\n\n\treturn;\n}\n\nfunction replacer(key, value) {\n\tif (typeof value === 'function') {\n\t\treturn value.toString();\n\t}\n\treturn value;\n}\n\nfunction getStoreString(seperator='') {\n\treturn JSON.stringify(store, replacer, seperator);\n}\n\nfunction updateWholeStoreSubs(subs) {\n\tstore.wholeStoreSubs.push(...subs);\n}\n\nfunction executeWholeStoreSubs() {\n\tconst subs = store.wholeStoreSubs;\n\n\tif (subs.length == 0) {\n\t\treturn;\n\t} \n\n\tfor (let sub in subs) {\n\t\tsubs[sub]();\n\t}\n\n\treturn;\n}\n\nexport {\n\tinitStoreValue,\n\tgetStoreValue,\n\tupdateStoreValue,\n\tupdateStoreSubs,\n\tgetStoreString,\n\tupdateWholeStoreSubs,\n\tsaveToLocalStorage\n};\n","import { getStoreValue } from '/utils/store.js';\n\nfunction draw(className, value) {\n\tdocument.querySelector(className).innerHTML = value;\n\n\treturn;\n}\n\nfunction drawFromStore(className, storeKey) {\n\tlet value = getStoreValue(storeKey);\n\n\tif (value === null) {\n\t\tconsole.error('Failed to retrieve value from store using key', storeKey);\n\t\treturn;\n\t}\n\n\tdraw(className, value);\n\n\treturn;\n}\n\nexport {\n\tdraw,\n\tdrawFromStore\n};\n","import { getStoreValue } from '/utils/store.js';\n\nvar MINIMUM_INTERVAL = 300;\n\nfunction onlineTicks(cb) {\n\tvar interval = getStoreValue('interval'),\n\t\texit = getStoreValue('exit');\n\n\tif (interval < MINIMUM_INTERVAL) {\n\t\tconsole.warn('Attempted to use interval lower than minimum interval, setting interval to minimum');\n\t\tinterval = MINIMUM_INTERVAL;\n\t}\n\n\tif (exit === true) {\n\t\tconsole.log('Ticks stopped');\n\t\treturn;\n\t}\n\n\tsetTimeout(() => {\n\t\tcb();\n\t\tonlineTicks(cb);\n\t}, interval);\n\n\treturn;\n}\n\n// #TODO: Implement offline tick calculator\n// function offlineTicks(interval, cb) {\n// \t\n// }\n\nexport {\n\tonlineTicks\n};\n","import { draw } from '/utils/display.js';\nimport { onlineTicks } from '/utils/tick.js';\nimport { getStoreValue, updateStoreValue } from '/utils/store.js';\n\nfunction startButton() {\n\tdocument.querySelector('.startCounter').addEventListener('click', function () {\n\t\tupdateStoreValue('exit', false);\n\t\tonlineTicks(function() { \n\t\t\tvar money = getStoreValue('money');\n\t\t\tupdateStoreValue('money', money + 1);\n\t\t});\n\n\t\tdocument.querySelector('.startCounter').disabled = true;\n\t\tdocument.querySelector('.stopCounter').disabled = false;\n\t});\n\n\treturn;\n}\n\nfunction stopButton() {\n\tdocument.querySelector('.stopCounter').addEventListener('click', function () {\n\t\tupdateStoreValue('exit', true);\n\t\tdocument.querySelector('.startCounter').disabled = false;\n\t\tdocument.querySelector('.stopCounter').disabled = true;\n\t});\n\n\treturn;\n}\n\nfunction upgradeButton() {\n\tdocument.querySelector('.buyUpgrade').addEventListener('click', function () {\n\t\tvar upgradeCost = getStoreValue('upgradeCost'),\n\t\t\tmoney = getStoreValue('money'),\n\t\t\tinterval = getStoreValue('interval');\n\n\t\tif (upgradeCost > money) {\n\t\t\tdraw('.warningText', 'Not enough money!');\n\t\t\treturn;\n\t\t}\n\n\t\tdraw('.warningText', '');\n\n\t\tupdateStoreValue('money', money - upgradeCost);\n\t\tupdateStoreValue('interval', interval - 50);\n\t\tupdateStoreValue('upgradeCost', upgradeCost * 2);\n\t});\n\n\treturn;\n}\n\nexport {\n\tstartButton,\n\tstopButton,\n\tupgradeButton\n};\n","import { updateWholeStoreSubs, getStoreString } from '/utils/store.js';\nimport { draw } from '/utils/display.js';\n\nfunction isInDev() {\n\tvar params = new URLSearchParams(window.location.search);\n\n\tif (params.get('devmode') !== null) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction wipe() {\n\tvar params = new URLSearchParams(window.location.search);\n\n\tif (params.get('wipe') !== null) {\n\t\twindow.localStorage.removeItem('idlestore');\n\t\tparams.delete('wipe');\n\n\t\twindow.location.href = window.location.origin + window.location.pathname + '?' + params.toString();\n\t}\n}\n\nfunction activateDevFunctions() {\n\tif (!isInDev()) {\n\t\treturn;\n\t}\n\t\t\t\n\tconst devTools = document.createElement('pre');\n\tdevTools.classList.add('devTools');\n\tdocument.querySelector('.game').append(devTools);\n\n\tupdateWholeStoreSubs([() => draw('.devTools', getStoreString('\\t'))]);\n\n\twipe();\n\n\twindow.getStoreString = getStoreString;\n\n\treturn;\n}\n\nexport {\n\tactivateDevFunctions\n};\n","import { drawFromStore } from '/utils/display.js';\nimport { startButton, stopButton, upgradeButton } from '/game/events.js';\nimport { initStoreValue, updateWholeStoreSubs, saveToLocalStorage, getStoreValue } from '/utils/store.js';\n\nimport { activateDevFunctions } from '/utils/devtools.js';\n\nfunction bindEvents() {\n\tstartButton();\n\tstopButton();\n\tupgradeButton();\n\n\treturn;\n}\n\nfunction initializeStore() {\n\tif (getStoreValue('loaded')) {\n\t\treturn;\n\t}\n\n\tinitStoreValue('money', 0, [() => drawFromStore('.money', 'money')]);\n\tinitStoreValue('upgradeCost', 1, [() => drawFromStore('.upgradeCost', 'upgradeCost')]);\n\n\tinitStoreValue('interval', 1000);\n\tinitStoreValue('exit', false);\n\n\treturn;\n}\n\nfunction initializeDraw() {\n\tdrawFromStore('.money', 'money');\n\tdrawFromStore('.upgradeCost', 'upgradeCost');\n\t\n\treturn;\n}\n\nfunction init() {\n\tconsole.log('Application started');\n\t\n\tbindEvents();\n\n\tinitializeStore();\n\tinitializeDraw();\n\n\tdocument.querySelector('.startCounter').disabled = false;\n\tdocument.querySelector('.stopCounter').disabled = true;\n\n\tactivateDevFunctions();\n\n\tupdateWholeStoreSubs([saveToLocalStorage]);\n\n\treturn;\n}\n\ninit();\n"],"names":["$e5a1e8ad98edf3c3$var$store","wholeStoreSubs","loaded","value","$e5a1e8ad98edf3c3$export$1b8cd2d0ef9a8e5d","storeValues","JSON","stringify","key","$e5a1e8ad98edf3c3$var$getStoreValues","window","localStorage","setItem","$e5a1e8ad98edf3c3$export$49bb15a59253183a","subs","console","error","parse","getItem","$e5a1e8ad98edf3c3$export$2bf86598e5b0b657","$e5a1e8ad98edf3c3$export$c4def42558db6d40","length","sub","$e5a1e8ad98edf3c3$var$executeSubs","$e5a1e8ad98edf3c3$var$executeWholeStoreSubs","$e5a1e8ad98edf3c3$var$replacer","toString","$e5a1e8ad98edf3c3$export$4057d970d3926fd7","seperator","$e5a1e8ad98edf3c3$export$d9291c43be2a46c0","push","$3d1283c690f0bed0$export$e529deb2bfd496dc","className","document","querySelector","innerHTML","$3d1283c690f0bed0$export$acf18b9e9fa3657b","storeKey","$c63a0215d81aa66d$export$547b13d7b8ab4e45","cb","interval","exit","warn","setTimeout","log","$6797e304a7b9719e$export$c19513be8e47ff73","addEventListener","disabled","$09eab49b787ed8b7$export$51faf82b9919d880","URLSearchParams","location","search","get","devTools","createElement","params","classList","add","append","removeItem","delete","href","origin","pathname","getStoreString","$6b17f08f738443dc$var$bindEvents","upgradeCost","money"],"version":3,"file":"index.b500daff.js.map"}