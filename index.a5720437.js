const e={wholeStoreSubs:[]};function t(){const t=JSON.stringify(function(){const t={};for(let n in e)e[n].data&&(t[n]=e[n].data);return t}());window.localStorage.setItem("idlestore",t)}function n(t,n,o=[]){if(e[t])return void console.error("Store already has entry by key",t);const r=JSON.parse(window.localStorage.getItem("idlestore"));r&&r[t]&&(n=r[t]),e[t]={data:n,subs:[...o]}}function o(t,n){return e[t]?e[t].data[n]:(console.error("No entry in store by key",t),null)}function r(t,n,o){e[t]?(e[t].data[n]=o,function(t,n){if(!e[t])return void console.error("No entry in store by key",t);const o=e[t].subs;if(0!=o.length)for(let e in o)o[e].triggers.indexOf(n)>-1&&o[e].func()}(t,n),function(){const t=e.wholeStoreSubs;if(0==t.length)return;for(let e in t)t[e]()}()):console.error("No entry in store by key",t)}function a(e,t){return"function"==typeof t?t.toString():t}function i(t=""){return JSON.stringify(e,a,t)}function u(t){e.wholeStoreSubs.push(...t)}function l(e,t){document.querySelector(e).innerHTML=t}function s(e,t,n){let r=o(t,n);null!==r?l(e,r):console.error("Failed to retrieve value from store using key",t)}function c(e,t){var n=o(t,"interval"),r=o(t,"running"),a=o("exit","value");n<300&&(console.warn("Attempted to use interval lower than minimum interval, setting interval to minimum"),n=300),!0===r?!0!==a?setTimeout((()=>{e(),c(...arguments)}),n):console.log("All ticks stopped - global exit"):console.log("Ticks stopped")}function d(e,t,a,i,u="money"){!function(e){const t=document.createElement("div");t.classList.add(e);const n=document.createElement("h3"),o=document.createElement("p"),r=document.createElement("button"),a=document.createElement("button");var i=e.split("_").map((e=>e[0].toUpperCase()+e.substring(1))).join(" ");n.innerHTML=i,o.classList.add(e+"_output"),r.classList.add(e+"_interval"),r.innerHTML=`Upgrade Interval: $<span class="${e}_upgrade_interval_cost></span>`,a.classList.add(e+"_rate"),a.innerHTML=`Upgrade Rate: $<span class="${e}_upgrade_rate_cost></span>`,t.append(n,o,r,a),document.querySelector(".accumulators").append(t)}(e);const s=()=>{l("."+e+"_output",function(e,t="$"){const n=o(e,"interval"),r=o(e,"rate");let a,i;return a=300===n?"tick":n/1e3+" second"+(n/1e3==1?"":"s"),i="$"===t?"$"+r:r+" "+t,`${i} / ${a}`}(e))};n(e,{interval:t,rate:a,resource:u,running:!0},[{triggers:[t,a],func:s}]),s();return c((()=>{var t=o(u,"value");r(u,"value",t+o(e,"rate"))}),e),e}function m(){if(null===new URLSearchParams(window.location.search).get("devmode"))return;const e=document.createElement("pre");var t;e.classList.add("devTools"),document.querySelector(".game").append(e),u([()=>l(".devTools",i("\t"))]),null!==(t=new URLSearchParams(window.location.search)).get("wipe")&&(window.localStorage.removeItem("idlestore"),t.delete("wipe"),window.location.href=window.location.origin+window.location.pathname+"?"+t.toString()),window.getStoreString=i}function p(){document.querySelector(".startCounter").addEventListener("click",(function(){r("exit",!1),d("sample",2e3,2),d("sample_2",1e4,10),d("sample_3",500,1),document.querySelector(".startCounter").disabled=!0,document.querySelector(".stopCounter").disabled=!1})),document.querySelector(".stopCounter").addEventListener("click",(function(){r("exit","value",!0),document.querySelector(".startCounter").disabled=!1,document.querySelector(".stopCounter").disabled=!0})),document.querySelector(".buyUpgrade").addEventListener("click",(function(){var e=o("upgradeCost"),t=o("money"),n=o("interval");e>t?l(".warningText","Not enough money!"):(l(".warningText",""),r("money",t-e),r("interval",n-50),r("upgradeCost",2*e))}))}console.log("Application started"),p(),n("money",{value:0},[{triggers:["value"],func:()=>s(".money","money","value")}]),n("upgradeCost",{value:1},[{triggers:["value"],func:()=>s(".upgradeCost","upgradeCost","value")}]),n("exit",{value:!1}),s(".money","money","value"),s(".upgradeCost","upgradeCost","value"),document.querySelector(".startCounter").disabled=!1,document.querySelector(".stopCounter").disabled=!0,m(),u([t]);
//# sourceMappingURL=index.a5720437.js.map
